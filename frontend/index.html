<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Bias Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation Tabs -->
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('analyze')">ğŸ” Analyze</button>
        <button class="tab-btn" onclick="showTab('history')">ğŸ“œ History</button>
        <button class="tab-btn" onclick="showTab('stats')">ğŸ“Š Statistics</button>
    </div>

    <div class="container">
        <!-- TAB 1: ANALYZE -->
        <div id="analyze-tab" class="tab-content active">
            <h2>ğŸ§  AI Bias Analyzer</h2>
            <p>Detect and correct bias in AI-generated content with blockchain verification</p>

            <textarea id="prompt" placeholder="Enter your prompt here... Try: 'Describe a software engineer' or 'Tell me about a nurse'"></textarea>
            <button onclick="analyzePrompt()">âœ¨ Analyze for Bias</button>

            <div id="loading" style="display: none; text-align: center; margin-top: 20px">
                <img src="https://i.gifer.com/YCZH.gif" width="60" alt="Loading" /><br />
                <strong>Analyzing your prompt...</strong>
            </div>

            <div id="results" style="display: none; margin-top: 30px">
                <div class="result-box">
                    <span class="label">ğŸ“ Original Text</span>
                    <p id="original"></p>
                </div>
                <div class="result-box">
                    <span class="label">âœ… Corrected Text</span>
                    <p id="corrected"></p>
                </div>
                <div class="result-box">
                    <span class="label">ğŸ¯ Bias Categories Detected</span>
                    <p id="bias_category"></p>
                </div>
                <div class="result-box">
                    <span class="label">ğŸ“Š Bias Score</span>
                    <p id="bias_score"></p>
                </div>
                <div class="result-box">
                    <span class="label">ğŸ”§ Corrections Made</span>
                    <ul id="corrections"></ul>
                </div>
                <div class="result-box">
                    <span class="label">â›“ï¸ Blockchain Transaction</span>
                    <p id="tx_hash" style="font-family: 'Courier New', monospace; font-size: 12px; word-break: break-all;"></p>
                </div>
                <div class="result-box">
                    <canvas id="biasChart"></canvas>
                </div>
            </div>
        </div>

        <!-- TAB 2: HISTORY -->
        <div id="history-tab" class="tab-content">
            <h2>ğŸ“œ Analysis History</h2>
            <p>View all previous bias detection results stored on blockchain</p>
            <button onclick="loadHistory()">ğŸ”„ Refresh History</button>
            
            <div id="history-loading" style="display: none; text-align: center; margin-top: 30px;">
                <img src="https://i.gifer.com/YCZH.gif" width="50" alt="Loading" />
                <p style="color: white; margin-top: 10px;">Loading history...</p>
            </div>
            
            <div id="history-list" style="margin-top: 30px;"></div>
        </div>

        <!-- TAB 3: STATISTICS -->
        <div id="stats-tab" class="tab-content">
            <h2>ğŸ“Š Bias Analytics</h2>
            <p>Comprehensive statistics about bias detection patterns</p>
            <button onclick="loadStats()">ğŸ”„ Refresh Stats</button>
            
            <div id="stats-loading" style="display: none; text-align: center; margin-top: 30px;">
                <img src="https://i.gifer.com/YCZH.gif" width="50" alt="Loading" />
                <p style="color: white; margin-top: 10px;">Loading statistics...</p>
            </div>
            
            <div id="stats-content" style="margin-top: 30px;">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="total-records">0</h3>
                        <p>Total Analyses</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="biased-records">0</h3>
                        <p>Bias Detected</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="avg-bias">0.0</h3>
                        <p>Avg Bias Score</p>
                    </div>
                </div>
                
                <div class="result-box">
                    <span class="label">ğŸ“ˆ Top Bias Categories</span>
                    <canvas id="categoryChart" height="100"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>